import{e,z as t,A as a,f as l,m as n,h as u,o,a as i,b as r,n as s,N as d}from"./index-CA6UagU_.js";import{_ as c}from"./sk-icon.vue_vue_type_script_setup_true_lang.BZYJbJTT.js";import{u as m}from"./use-parent.Dwjp3nL8.js";import{F as p}from"./index.Budg9xHA.js";import{S as v}from"./field.Ccjhm7Cj.js";const f=p({element:{root:"relative inline-flex items-center rounded-medium bg-subtle overflow-hidden",input:"flex-1 h-full text-center text-primary",button:"flex-center h-full shrink-0 bg-muted cursor-pointer transition-colors duration-200",icon:"text-secondary",placeholder:"text-placeholder"},variants:{size:{small:{root:"sk-unit:h-42",input:"sk-unit:w-68 text-body-small",button:"sk-unit:px-16",icon:"sk-unit:size-16"},medium:{root:"sk-unit:h-44",input:"sk-unit:w-80 text-body-medium",button:"sk-unit:px-18",icon:"sk-unit:size-18"},large:{root:"sk-unit:h-46",input:"sk-unit:w-92 text-body-large",button:"sk-unit:px-18",icon:"sk-unit:size-20"}},disabled:{true:{root:"opacity-60 cursor-not-allowed",input:"cursor-not-allowed",button:"cursor-not-allowed pointer-events-none"},false:{}},readonly:{true:{input:"cursor-not-allowed",button:"cursor-not-allowed pointer-events-none"},false:{}},range:{true:{},false:{button:"opacity-60"}}},defaults:{size:"medium",disabled:!1,readonly:!1}}),b=e({inheritAttrs:!1,options:{virtualHost:!0},__name:"sk-number-input",props:t({min:{},max:{},step:{default:1},stepStrictly:{type:Boolean,default:!1},placeholder:{},size:{default:"medium"},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},formatOptions:{},clax:{}},{modelValue:{default:0},modelModifiers:{}}),emits:t(["change","focus","blur"],["update:modelValue"]),setup(e,{emit:t}){const p=e,b=a(e,"modelValue"),x=t,{parent:h}=m(v),y=l(!1),N=l("");function k(e){if(Number.isInteger(e))return 0;const t=e.toString(),a=t.indexOf(".");return-1===a?0:Math.min(t.length-a-1,3)}function g(e,t,a){const l=Math.max(k(e),k(t)),n=10**l,u=Math.round(e*n),o=Math.round(t*n);return Number(("add"===a?(u+o)/n:(u-o)/n).toFixed(l))}function w(e){return p.formatOptions?new Intl.NumberFormat("zh-CN",p.formatOptions).format(e):e.toFixed(k(e))}const _=n(()=>p.disabled||(null==h?void 0:h.props.disabled)),F=n(()=>f({...p,disabled:_.value})),z=n(()=>!y.value||null===N.value&&void 0===N.value?w(b.value):N.value),M=n(()=>!_.value&&!p.readonly&&(void 0===p.min||b.value>p.min)),O=n(()=>!_.value&&!p.readonly&&(void 0===p.max||b.value<p.max));function j(e){const t=(a=e,void 0!==p.min&&a<p.min&&(a=p.min),void 0!==p.max&&a>p.max&&(a=p.max),p.stepStrictly&&(a=Math.round(a/p.step)*p.step),Number(a.toFixed(k(a))));var a;t!==b.value&&(b.value=t,x("change",t),h&&h.handleChange(b.value))}function B(){if(!M.value)return;j(g(b.value,p.step,"subtract"))}function S(){if(!O.value)return;j(g(b.value,p.step,"add"))}function C(e){y.value=!0,N.value=w(b.value),x("focus",{value:b.value}),h&&h.handleFocus(b.value)}function I(e){N.value=e.detail.value}function V(e){if(y.value=!1,N.value.trim()){j(function(e){if(!(null==e?void 0:e.trim()))return 0;if(p.formatOptions){const t=e.replace(/[^\d.-]/g,""),a=Number.parseFloat(t);return"percent"===p.formatOptions.style?Number.isNaN(a)?0:a/100:Number.isNaN(a)?0:Number(a.toFixed(2))}const t=Number.parseFloat(e);return Number.isNaN(t)?0:t}(N.value))}N.value="",x("blur",{value:b.value}),h&&h.handleBlur(b.value)}return(e,t)=>{const a=d;return o(),u("div",{class:s(F.value.root())},[i("div",{class:s(F.value.button({range:M.value})),onClick:B},[r(c,{name:"i-lucide:minus",clax:F.value.icon()},null,8,["clax"])],2),r(a,{value:z.value,controlled:!0,placeholder:e.placeholder,disabled:e.disabled||e.readonly,class:s(F.value.input()),"placeholder-class":F.value.placeholder(),onInput:I,onFocus:C,onBlur:V},null,8,["value","placeholder","disabled","class","placeholder-class"]),i("div",{class:s(F.value.button({range:O.value})),onClick:S},[r(c,{name:"i-lucide:plus",clax:F.value.icon()},null,8,["clax"])],2)],2)}}});export{b as _};
