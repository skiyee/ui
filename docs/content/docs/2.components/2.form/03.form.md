---
title: "Form 表单"
description: "用于收集、校验和提交用户输入数据的表单组件"
authors:
  - name: sKy
    username: skiyee
    avatar: https://www.github.com/skiyee.png
    to: https://github.com/skiyee
    target: _blank
links:
  - label: Source
    icon: radix-icons:github-logo
    to: https://github.com/skiyee/ui/blob/main/uni-ui/src/components/sk-form.vue
    target: _blank
---

::CodePreview{path="/pages-form/form/base" height="250"}
<!-- automd:file src="../../../../../examples/uni/src/pages-form/form/base.vue" code no-name -->

```vue
<template>
  <div class="p-4 w-full">
    <SkForm>
      <SkField name="username" label="用户名">
        <SkInput placeholder="请输入用户名" />
      </SkField>
      <!-- ...SkField -->
    </SkForm>
  </div>
</template>
```

<!-- /automd -->
::

## 用法

::tip{to="/docs/components/form/form-field" target="_blank"}
通常与 `SkField` 组件配合使用，前往获取该组件更多信息
::

### Values 表单数据

| Prop     | 类型     | 默认值 | 描述                                         |
|----------|----------|--------|----------------------------------------------|
| `values` | `object` | -      | 设置表单数据内容，可作为初始化以及校验的数据 |

::CodePreview{path="/pages-form/form/values" height="250"}
<!-- automd:file src="../../../../../examples/uni/src/pages-form/form/values.vue" code no-name -->

```vue
<script lang="ts" setup>
import { ref } from 'vue'

const formData = ref({
  username: '默认用户名',
})
</script>

<template>
  <div class="p-4 w-full">
    <SkForm :values="formData">
      <SkField name="username" label="用户名">
        <SkInput v-model="formData.username" placeholder="请输入用户名" />
      </SkField>
    </SkForm>
  </div>
</template>
```

<!-- /automd -->
::

### Schema 表单校验

::note
当前支持使用 `Zod`、`Valibot`、`ArkType` 等遵循Standard Schema规范的校验库进行表单校验。
::

| Prop     | 类型     | 默认值 | 描述             |
|----------|----------|--------|------------------|
| `schema` | `Schema` | -      | 设置表单校验规则 |

::tabs

:::tab{label="Zod"}

::CodePreview{path="/pages-form/form/schema-zod" height="250"}
<!-- automd:file src="../../../../../examples/uni/src/pages-form/form/schema-zod.vue" code no-name -->

```vue
<script setup lang="ts">
import { ref } from 'vue'
import { z } from 'zod'

const formSchema = z.object({
  username: z.string().min(3, '用户名至少3个字符').max(20, '用户名最多20个字符'),
})

const formData = ref({
  username: '',
})
</script>

<template>
  <div class="p-4 w-full">
    <SkForm :schema="formSchema" :values="formData">
      <SkField name="username" label="用户名" required>
        <SkInput v-model="formData.username" placeholder="请输入用户名" />
      </SkField>
    </SkForm>
  </div>
</template>
```

<!-- /automd -->
::

:::

:::tab{label="ArkType"}

::CodePreview{path="/pages-form/form/schema-arktype" height="250"}
<!-- automd:file src="../../../../../examples/uni/src/pages-form/form/schema-arktype.vue" code no-name -->

```vue
<script setup lang="ts">
import { type } from 'arktype'
import { ref } from 'vue'

const formSchema = type({
  username: type('3<=string<=20').configure({
    message: () => `用户名字符必须在 3~20 个之间`,
  }),
})

const formData = ref({
  username: '',
})
</script>

<template>
  <div class="p-4 w-full">
    <SkForm :schema="formSchema" :values="formData">
      <SkField name="username" label="用户名" required>
        <SkInput v-model="formData.username" placeholder="请输入用户名" />
      </SkField>
    </SkForm>
  </div>
</template>
```

<!-- /automd -->
::
:::

::

### ValidateOn 校验时机

| Prop         | 类型                    | 默认值              | 描述               |
|--------------|-------------------------|---------------------|--------------------|
| `validateOn` | `{ValidationTrigger}[]` | `['change','blur']` | 进行校验的触发时机 |

| ValidateTrigger | 描述           |
|-----------------|----------------|
| `focus`         | 获得焦点时校验 |
| `change`        | 值改变时校验   |
| `blur`          | 失去焦点时校验 |

::CodePreview{path="/pages-form/form/validate-on" height="250"}
<!-- automd:file src="../../../../../examples/uni/src/pages-form/form/validate-on.vue" code no-name -->

```vue
<script setup lang="ts">
import type { SkFormProps } from '@skiyee/uni-ui/components/sk-form.vue'

import { reactive, ref } from 'vue'
import { z } from 'zod'

const formSchema = z.object({
  username: z.string().min(3, '用户名至少3个字符').max(20, '用户名最多20个字符'),
})

type IFormData = z.output<typeof formSchema>

const formData = reactive<Partial<IFormData>>({
  username: '',
})

const validateOn = ref<SkFormProps<typeof formSchema>['validateOn']>(['change', 'blur'])
</script>

<template>
  <div class="p-4 w-full">
    <SkForm
      :schema="formSchema"
      :values="formData"
      :validate-on="validateOn"
    >
      <SkField name="username" label="用户名" required>
        <SkInput v-model="formData.username" placeholder="请输入用户名" />
      </SkField>
      <SkField label="校验时机">
        <SkCheckboxGroup v-model="validateOn" direction="horizontal">
          <SkCheckbox value="change" label="更改时" />
          <SkCheckbox value="focus" label="获得焦点时" />
          <SkCheckbox value="blur" label="失去焦点时" />
        </SkCheckboxGroup>
      </SkField>
    </SkForm>
  </div>
</template>
```

<!-- /automd -->
::

### DebounceTime 防抖时间

| Prop           | 类型     | 默认值 | 描述                    |
|----------------|----------|--------|-------------------------|
| `debounceTime` | `number` | `300`  | 校验防抖延迟时间 (毫秒) |

::CodePreview{path="/pages-form/form/debounce-time" height="250"}
<!-- automd:file src="../../../../../examples/uni/src/pages-form/form/debounce-time.vue" code no-name -->

```vue
<script setup lang="ts">
import { ref } from 'vue'
import { z } from 'zod'

const formSchema = z.object({
  username: z.string().min(3, '用户名至少3个字符').max(20, '用户名最多20个字符'),
})

const formData = ref<Partial<z.infer<typeof formSchema>>>({
  username: '',
})

const debounceTime = ref('300')
</script>

<template>
  <div class="p-4 w-full">
    <SkForm :schema="formSchema" :values="formData" :debounce-time="+debounceTime">
      <SkField name="username" label="用户名" required>
        <SkInput v-model="formData.username" placeholder="请输入用户名" />
      </SkField>
      <SkField label="防抖延迟">
        <SkRadioGroup v-model="debounceTime" direction="horizontal">
          <SkRadio value="300" label="默认" />
          <SkRadio value="1000" label="一秒" />
          <SkRadio value="5000" label="五秒" />
        </SkRadioGroup>
      </SkField>
    </SkForm>
  </div>
</template>
```

<!-- /automd -->
::

### Orientation 布局方向

::note
若 `SkField` 的 [`orientation`](/docs/components/form/field#orientation-布局方向) 属性未设置，则该属性的值会被继承，否则将被覆盖
::

| Prop          | 类型            | 默认值     | 描述         |
|---------------|-----------------|------------|--------------|
| `orientation` | `{Orientation}` | `vertical` | 设置布局方向 |

| Orientation  | 描述     |
|--------------|----------|
| `vertical`   | 垂直布局 |
| `horizontal` | 水平布局 |

::CodePreview{path="/pages-form/form/orientation" height="250"}
<!-- automd:file src="../../../../../examples/uni/src/pages-form/form/orientation.vue" code no-name -->

```vue
<template>
  <div class="p-4 w-full">
    <SkForm orientation="horizontal">
      <SkField name="username" label="用户名" orientation="vertical">
        <SkInput placeholder="请输入用户名" />
      </SkField>
      <SkField name="password" label="密码">
        <SkInput placeholder="请输入密码" />
      </SkField>
    </SkForm>
  </div>
</template>
```

<!-- /automd -->
::

### LabelWidth 标签宽度

::note
若 `SkField` 的 [`labelWidth`](/docs/components/form/field#labelwidth-标签宽度) 属性未设置，则该属性的值会被继承，否则将被覆盖
::

| Prop         | 类型               | 默认值 | 描述                                                      |
|--------------|--------------------|--------|-----------------------------------------------------------|
| `labelWidth` | `string \| number` | `140`  | 设置标签的宽度 (如果未填写单位，默认为 rpx，否则原样输出) |

::CodePreview{path="/pages-form/form/label-width" height="250"}
<!-- automd:file src="../../../../../examples/uni/src/pages-form/form/label-width.vue" code no-name -->

```vue
<template>
  <div class="p-4 w-full">
    <SkForm label-width="40px" orientation="horizontal">
      <SkField name="username" label-width="60px" label="用户名">
        <SkInput placeholder="请输入用户名" />
      </SkField>
      <SkField name="password" label="密码">
        <SkInput placeholder="请输入密码" />
      </SkField>
    </SkForm>
  </div>
</template>
```

<!-- /automd -->
::

### Size 尺寸大小

::note
若 `SkField` 的 [`size`](/docs/components/form/field#size-尺寸大小) 属性未设置，则该属性的值会被继承，否则将被覆盖
::

| Prop   | 类型     | 默认值   | 描述                   |
|--------|----------|----------|------------------------|
| `size` | `{Size}` | `medium` | 设置被包裹组件尺寸大小 |

| Size     | 描述 |
|----------|------|
| `small`  | 小型 |
| `medium` | 中型 |
| `large`  | 大型 |

::CodePreview{path="/pages-form/form/size" height="250"}
<!-- automd:file src="../../../../../examples/uni/src/pages-form/form/size.vue" code no-name -->

```vue
<template>
  <div class="p-4 w-full">
    <SkForm size="small">
      <SkField name="username" label="用户名">
        <SkInput placeholder="请输入用户名" />
      </SkField>
      <SkField name="hobby" label="爱好" size="large">
        <SkInput placeholder="请输入爱好" />
      </SkField>
    </SkForm>
  </div>
</template>
```

<!-- /automd -->
::

### Disabled 禁用状态

| Prop       | 类型      | 默认值  | 描述                   |
|------------|-----------|---------|------------------------|
| `disabled` | `boolean` | `false` | 设置表单是否为禁用状态 |

::CodePreview{path="/pages-form/form/disabled" height="250"}
<!-- automd:file src="../../../../../examples/uni/src/pages-form/form/disabled.vue" code no-name -->

```vue
<script setup lang="ts">
import { ref } from 'vue'

const formData = ref({
  username: '张三',
})

const isDisabled = ref(true)

function toggleDisabled() {
  isDisabled.value = !isDisabled.value
}
</script>

<template>
  <div class="p-4 w-full">
    <SkForm :disabled="isDisabled">
      <SkField name="username" label="用户名">
        <SkInput v-model="formData.username" placeholder="请输入用户名" />
      </SkField>
    </SkForm>

    <div class="mt-4">
      <SkButton size="small" @click="toggleDisabled">
        {{ isDisabled ? '启用表单' : '禁用表单' }}
      </SkButton>
    </div>
  </div>
</template>
```

<!-- /automd -->
::

## 例子

### 表单提交与重置

::CodePreview{path="/pages-form/form/submit" height="250"}
::CodeCollapse
<!-- automd:file src="../../../../../examples/uni/src/pages-form/form/submit.vue" code no-name -->

```vue
<script setup lang="ts">
import type { SkFormExposes } from '@skiyee/uni-ui/components/sk-form.vue'

import { ref } from 'vue'
import { z } from 'zod'

const formSchema = z.object({
  name: z.string().min(1, '姓名不能为空'),
})

type IFormData = z.infer<typeof formSchema>

const formData = ref<Partial<IFormData>>({
  name: '',
})

const formRef = ref<SkFormExposes<typeof formSchema>>()
const isSubmitting = ref(false)
const submitResult = ref('')

async function handleSubmit(data: IFormData) {
  isSubmitting.value = true
  submitResult.value = ''

  try {
    // 模拟API调用
    await new Promise(resolve => setTimeout(resolve, 2000))

    submitResult.value = `提交成功！数据: ${JSON.stringify(data, null, 2)}`

    uni.showToast({
      title: '提交成功',
      icon: 'success',
    })
  }
  catch {
    submitResult.value = '提交失败，请重试'
    uni.showToast({
      title: '提交失败',
      icon: 'error',
    })
  }
  finally {
    isSubmitting.value = false
  }
}

function handleReset() {
  submitResult.value = ''
  formData.value = {
    name: '',
  }

  formRef.value?.resetValidation()

  uni.showToast({
    title: '表单校验状态已重置',
    icon: 'none',
  })
}
</script>

<template>
  <div class="p-4 w-full">
    <SkForm
      ref="formRef"
      :schema="formSchema"
      :values="formData"
      @submit="handleSubmit"
    >
      <SkField name="name" label="姓名" required>
        <SkInput v-model="formData.name" placeholder="请输入您的姓名" />
      </SkField>

      <div class="flex gap-2 mt-4">
        <SkButton type="submit" color="brand" :disabled="isSubmitting">
          <SkSpinner v-if="isSubmitting" color="current" />{{ isSubmitting ? '提交中...' : '提交' }}
        </SkButton>
        <SkButton variant="bound" :disabled="isSubmitting" @click="handleReset">
          重置提交与校验
        </SkButton>
      </div>
    </SkForm>

    <div v-if="submitResult" class="mt-4 p-3 bg-muted rounded">
      <pre class="text-sm">{{ submitResult }}</pre>
    </div>
  </div>
</template>
```

<!-- /automd -->
::
::

## 接口

### Props

| 属性名        | 类型                    | 默认值              | 描述                                               |
|---------------|-------------------------|---------------------|----------------------------------------------------|
| `values`      | `object`                | -                   | 详见 [Values 表单数据](#values-表单数据)           |
| `schema`      | `Schema`                | -                   | 详见 [Schema 表单校验](#schema-表单校验)           |
| `validateOn`  | `{ValidationTrigger}[]` | `['change','blur']` | 详见 [ValidateOn 校验时机](#validateon-校验时机)   |
| `debounceMs`  | `number`                | `300`               | 详见 [DebounceMs 校验防抖](#debouncems-校验防抖)   |
| `orientation` | `{Orientation}`         | `vertical`          | 详见 [Orientation 布局方向](#orientation-布局方向) |
| `labelWidth`  | `string \| number`      | `140`               | 详见 [LabelWidth 标签宽度](#labelwidth-标签宽度)   |
| `size`        | `{Size}`                | `medium`            | 详见 [Size 尺寸大小](#size-尺寸大小)               |
| `disabled`    | `boolean`               | `false`             | 详见 [Disabled 禁用状态](#disabled-禁用状态)       |

### Emits

| 事件名   | 参数                    | 描述                     |
|----------|-------------------------|--------------------------|
| `submit` | `(data: typeof values)` | 表单提交并通过校验时触发 |

### Slots

| 插槽名    | 属性 | 描述         |
|-----------|------|--------------|
| `default` | -    | 表单内容区域 |

### Exports

| 方法名            | 参数 | 返回值                   | 描述         |
|-------------------|------|--------------------------|--------------|
| `validate`        | -    | `Promise<typeof values>` | 校验整个表单 |
| `resetValidation` | -    | `void`                   | 重置校验状态 |
| `submit`          | -    | `Promise<void>`          | 提交表单     |